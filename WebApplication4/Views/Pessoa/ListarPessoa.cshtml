@model IEnumerable<WebApplication4.Models.Pessoa>

@{
    ViewBag.Title = "ListaPessoa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<table id="table" class=" display table-striped table-sm" style="width:100%">
    <thead>
        <tr>
            <th>CPF</th>
            <th>Nome</th>
            <th>Data de Nascimento</th>
            <th>E-mail</th>
            <th>ações</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.CPF)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Nome)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Data_nascimento)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @{
                        if (item.Telefone.Count != 0)
                        {
                            <a class=" btn-link" style="text-decoration:none" data-toggle="modal" data-target="#ModalTelefone" title="adicione um Telefone" onclick="Telefone('@item.CPF', '@item.Nome')"> <i class="fas fa-phone text-danger"></i></a>
                        }
                        else
                        {
                            <a class=" btn-link" style="text-decoration:none" data-toggle="modal" data-target="#ModalTelefone" title="adicione um Telefone" onclick="Telefone('@item.CPF', '@item.Nome')"> <i class="fas fa-phone text-dark"></i> </a>
                        }
                        if (item.Endereco.Count != 0)
                        {
                            <a class="btn-link" style="text-decoration:none" data-toggle="modal" data-target="#ModalEndereco" title="adicione um endereço" onclick="Endereco('@item.CPF', '@item.Nome')"> <i class="fas fa-map-marker-alt text-success"></i> </a>
                        }
                        else
                        {
                            <a class="btn-link" data-toggle="modal" style="text-decoration:none;" data-target="#ModalEndereco" title="adicione um endereço" onclick="Endereco('@item.CPF', '@item.Nome')"> <i class="fas fa-map-marker-alt text-dark"></i> </a>
                        }

                    }


                    <a class="btn-link" style="text-decoration:none;" title="Editar Pessoa" href="@Url.Action("DetalhePessoa","Pessoa", new {cpf = item.CPF })"> <i class="fas fa-edit text-dark"></i> </a>


                    <a class="btn-link" style="text-decoration:none;" title="Detalhes" href="@Url.Action("DetalhePessoa","Pessoa", new {cpf = item.CPF })"><i class="fas fa-eye text-primary"></i></a>



                </td>
            </tr>
        }
    </tbody>
</table>


<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" id="ModalTelefone" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Novo Número de <input type="text" disabled style="border: none" class="bg-white" value="" id="nomeTelefone" name="n"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            @using (Html.BeginForm("AdicionarNumero", "Pessoa", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <div class="modal-body">

                    <div class="form-horizontal" style="margin-bottom:3%;">
                        <div class="col-md-12">

                            <div class="card-body row">
                                <div class="form-group col-sm-5" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Selecione o Tipo</label>
                                    <select name="Descricao" type="text" class="form-control">
                                        <option value="Celular">Celular</option>
                                        <option value="WhatsApp">WhatsApp</option>
                                        <option value="Residencial">Residencial</option>
                                        <option value="Trabalho">Trabalho</option>
                                        <option value="Outros">Outros</option>
                                    </select>
                                </div>

                                <div class="form-group col-sm-7" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Número</label>
                                    <input name="numero" type="text" class="form-control" />
                                </div>
                                <input type="text" hidden name="CPF" id="cpfTelefone">
                            </div>

                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>

                    <input type="submit" value="Adicionar Número" class="btn btn-success" style="font-weight:bold; font-family:Arial;" />

                </div>

            }
        </div>
    </div>
</div>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" id="ModalEndereco" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Novo Endereço de <input type="text" disabled style="border: none" class="bg-white" value="" id="nomeEndereco" name="n"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            @using (Html.BeginForm("AdicionarEndereco", "Pessoa", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <div class="modal-body">

                    <div class="form-horizontal" style="margin-bottom:3%;">
                        <div class="col-md-12">

                            <div class="card-body row">
                                <div class="form-group col-sm-3" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Selecione o Tipo</label>
                                    <select name="Descricao" type="text" class="form-control">
                                        <option value="Moradia">Moradia</option>
                                        <option value="Trabalho">Trabalho</option>
                                        <option value="Empresa">Empresa</option>
                                        <option value="Outro">Outro</option>
                                    </select>
                                </div>
                                <div class="form-group col-sm-6" style="font-weight:bold;">
                                    <label class="bmd-label-floating">País:</label>
                                    <input class="form-control " name="Pais" type="text" value="" />
                                </div>
                                <div class="form-group col-sm-3" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Cep:</label>
                                    <input class="form-control " name="Cep" type="text" id="cep" value="" onblur="pesquisacep(this.value);" />
                                </div>
                                <div class="form-group col-sm-2" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Estado:</label>
                                    <input class="form-control " name="Estado" type="text" id="uf" value="" />
                                </div>
                                <div class="form-group col-sm-4" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Cidade:</label>
                                    <input class="form-control " name="Cidade" type="text" id="cidade" value="" />
                                </div>
                                <div class="form-group col-sm-6" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Rua:</label>
                                    <input class="form-control " name="Rua" type="text" id="rua" value="" />
                                </div>
                                <div class="form-group col-sm-2" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Numero:</label>
                                    <input class="form-control " name="Numero" type="text" value="" />
                                </div>
                                <div class="form-group col-sm-5" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Complemento:</label>
                                    <input class="form-control " name="Complemento" type="text" value="" />
                                </div>

                                <div class="form-group col-sm-5" style="font-weight:bold;">
                                    <label class="bmd-label-floating">Bairro:</label>
                                    <input class="form-control " name="Bairro" type="text" id="bairro" value="" />
                                </div>


                                <input type="text" hidden name="CPF" id="cpfEndereco">
                            </div>

                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
                    <input type="submit" value="Adicionar Endereço" class="btn btn-success" style="font-weight:bold; font-family:Arial;" />

                </div>

            }
        </div>
    </div>
</div>






<script>

    function Telefone(cpf, nome) {

        $("#cpfTelefone").val(cpf);
        $("#nomeTelefone").val(nome)
    }
    function Endereco(cpf, nome) {

        $("#cpfEndereco").val(cpf);
        $("#nomeEndereco").val(nome)
    }

</script>


